<ui:FluentWindow
    x:Class="AI_bestandsorganizer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    mc:Ignorable="d"
    Title="AI File Organizer"
    Height="420" Width="500"
    MinWidth="460" MinHeight="400"
    WindowStartupLocation="CenterScreen"
    WindowBackdropType="Mica"
    ExtendsContentIntoTitleBar="True">

    <!-- Root grid containing TitleBar, UI and snackbar overlay -->
    <Grid Margin="0">
        <!-- Snackbar overlay (always on top) -->
        <ui:SnackbarPresenter x:Name="RootSnackbarPresenter" Panel.ZIndex="99"
                              VerticalAlignment="Bottom" HorizontalAlignment="Right"
                              Margin="0,0,12,12"/>

        <!-- Main layout -->
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- TitleBar -->
                <RowDefinition Height="Auto"/>
                <!-- API key -->
                <RowDefinition Height="Auto"/>
                <!-- Source folder -->
                <RowDefinition Height="Auto"/>
                <!-- Destination folder -->
                <RowDefinition Height="Auto"/>
                <!-- Model -->
                <RowDefinition Height="Auto"/>
                <!-- Options -->
                <RowDefinition Height="*"/>
                <!-- Log -->
                <RowDefinition Height="Auto"/>
                <!-- Run button -->
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <!-- Token usage -->
                <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- WinUI‑style title bar -->
            <ui:TitleBar x:Name="AppTitleBar"
                         Title="AI File Organizer"
                         Icon="DocumentSettings24"
                         Grid.Row="0"/>

            <!-- API key -->
            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,6,0,6">
                <TextBlock Text="Google API‑key:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ui:PasswordBox x:Name="ApiKeyBox" Width="280"/>
            </StackPanel>

            <!-- Source folder -->
            <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="0,0,0,6">
                <TextBlock Text="Bronmap:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ui:TextBox x:Name="SrcBox" Width="260"/>
                <ui:Button Content="…" Width="32" Height="24" Margin="6,0,0,0" Click="BrowseSrc"/>
            </StackPanel>

            <!-- Destination folder -->
            <StackPanel Orientation="Horizontal" Grid.Row="3" Margin="0,0,0,6">
                <TextBlock Text="Doelmap:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ui:TextBox x:Name="DstBox" Width="260"/>
                <ui:Button Content="…" Width="32" Height="24" Margin="6,0,0,0" Click="BrowseDst"/>
            </StackPanel>

            <!-- Model -->
            <StackPanel Orientation="Horizontal" Grid.Row="4" Margin="0,0,0,6">
                <TextBlock Text="Model:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ComboBox x:Name="ModelBox" Width="200">
                    <ComboBoxItem Content="gemini-2.5-pro" IsSelected="True"/>
                    <ComboBoxItem Content="gemini-2.5-flash"/>
                    <ComboBoxItem Content="gemini-1.5-pro-latest"/>
                    <ComboBoxItem Content="gemini-1.5-flash-latest"/>
                    <ComboBoxItem Content="gemini-1.0-pro-002"/>
                </ComboBox>
            </StackPanel>

            <!-- Options -->
            <StackPanel Orientation="Horizontal" Grid.Row="5" Margin="0,0,0,12">
                <ui:ToggleSwitch x:Name="EnableRenamingCheckBox" Content="Beschrijvende bestandsnamen genereren"/>
            </StackPanel>

            <!-- Log output -->
            <ui:TextBox x:Name="LogBox" Grid.Row="6" VerticalScrollBarVisibility="Auto"
                        AcceptsReturn="True" IsReadOnly="True" TextWrapping="Wrap" Height="120"/>
            <!-- Token usage display -->
            <TextBlock x:Name="TokenUsageTextBlock" Grid.Row="8" Text="Tokens used: 0" Margin="0,4,0,0"
                       HorizontalAlignment="Left" Opacity="0.8"/>

            <!-- Footer -->
            <!-- Run button -->
            <ui:Button x:Name="RunButton" Content="Start" Appearance="Primary" Width="90" Height="32"
                       Grid.Row="7" HorizontalAlignment="Right" Click="Run_Click"/>

            <!-- Footer -->
            <StackPanel Orientation="Horizontal" Grid.Row="8" HorizontalAlignment="Center" Margin="0,8,0,0">
                <TextBlock Text="Made by " VerticalAlignment="Center"/>
                <ui:Button Content="Remsey Mailjard" Appearance="Transparent" Click="OpenLinkedIn"/>
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>
